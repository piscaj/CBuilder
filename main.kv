#:import hex kivy.utils.get_color_from_hex
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import NoTransition kivy.uix.screenmanager.NoTransition
ManagerScreen:
    MenuScreen:
    CLScreen:
    EditScreen:
    SettingsScreen:
    ViewCodeScreen:
    FtpScreen:

<ListItemWithEdit>:
    id:list_item
    icon_left:icon_left
    ListItemDelete:
        id:icon_left
        list_item:list_item
        icon: root.icon

<ConfirmDelete>:
    orientation: "vertical"
    spacing: "12dp"
    size_hint_y: None
    height: "120dp"
    canvas:
        Color:
            rgba: hex('#6d7275')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: 30,30,30,30

<MenuScreen>:
    name:"menu_screen"
    MDRaisedButton:
        id:CBbut
        pos_hint:{"center_x": 0.5, "center_y": 0.5}
        increment_width: "75dp"
        text:"CBuilder"
        on_release: app.root.current = 'cl_screen'

<CLScreen>:
    id:cScreen
    name:"cl_screen"
    cList:cList
    cScroll:cScroll
    canvas:
        Color:
            rgba: hex('#ffffff')
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [0]
    MDScrollViewRefreshLayout:
        id:cScroll
        refresh_callback: root.refresh
        root_layout: root
        pos_hint:{"top": 1}
        size_hint: None,None
        size: root.width, root.height - c_toolbar.height
        CList:
            id:cList
            cScreen:cScreen
            cScroll:cScroll
    CLBottomToolbar:
        id: c_bottombar
        cScreen:cScreen
        cList:cList
        MDToolbar:
            id:c_toolbar
            c_bottombar:c_bottombar
            title: "CBuilder"
            icon: "plus"
            type: "bottom"
            left_action_items: [["json", lambda x: c_bottombar.goViewCode()]]
            right_action_items: [["cloud-upload-outline", lambda x: c_bottombar.goFTP()],["settings", lambda x: c_bottombar.goSettings()]]
            on_action_button: c_bottombar.addItem()
       
<EditScreen>:
    id:eScreen
    eBottombar:eBottombar
    eName:eName
    eDes:eDes
    eCom:eCom
    name:"e_screen"
    canvas:
        Color:
            rgba: hex('#ffffff')
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [0]
    EditBottomToolbar:
        id:eBottombar
        eScreen:eScreen
        title: "Back"
        left_action_items: [["arrow-left-circle-outline", lambda x: self.goBack()]]
    MDTextField:
        id:eName
        eScreen:eScreen
        hint_text: "Room Name"
        size_hint: 0.5, None
        pos_hint:{"center_x": 0.5, "center_y": 0.85}
        multiline: False
    MDTextField:
        id:eDes
        eScreen:eScreen
        hint_text: "Description"
        size_hint: 0.5, None
        multiline: False
        pos_hint:{"center_x": 0.5, "center_y": 0.65}
    MDTextField:
        id:eCom
        eScreen:eScreen
        hint_text: "Command"
        size_hint: 0.5, None
        multiline: False
        pos_hint:{"center_x": 0.5, "center_y": 0.45}    
    MDGridLayout:
        adaptive_height: True
        #md_bg_color: app.theme_cls.primary_color
        pos_hint:{"center_x": 0.5, "center_y": 0.3}
        padding:10
        spacing:10
        cols:4
        rows:1
        Widget:
        MDRaisedButton:
            id:eSave
            eScreen:eScreen
            pos_hint:{"center_x": 0.5, "center_y": 0.5}
            increment_width: "75dp"
            text:"Save"
            on_release: eScreen.saveEdits()
        MDRaisedButton:
            id:eCancel
            pos_hint:{"center_x": 0.5, "center_y": 0.5}
            increment_width: "75dp"
            text:"Cancel"
            on_release:
                app.root.transition = SlideTransition( duration=0.6, direction="right")
                app.root.current = 'cl_screen'
        Widget:
        
    
<SettingsScreen>:
    id:sScreen
    name:"s_screen"
    canvas:
        Color:
            rgba: hex('#737475')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: 30,30,0,0
    MDRaisedButton:
        pos_hint:{"center_x": 0.5, "center_y": 0.5}
        increment_width: "75dp"
        text:"CBuilder"
    SettingsBottomToolbar:
        id:sBottombar
        sScreen:sScreen
        title: "Settings"
        right_action_items: [["close", lambda x: self.goBack()]]
<ViewCodeScreen>:
    id:vScreen
    vLabel:vLabel
    name:"v_screen"
    canvas:
        Color:
            rgba: hex('#737475')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: 30,30,0,0
    ScrollView:
        pos_hint:{"top": 1}
        size_hint: None,None
        size: root.width, root.height - vBottombar.height
        Label:
            id: vLabel
            padding: [40, 40]
            size_hint: None, None   
            size: self.texture_size
            text: "JSON"
    SettingsBottomToolbar:
        id:vBottombar
        sScreen:vScreen
        title: "JSON"
        right_action_items: [["close", lambda x: self.goBack()]]
<FtpScreen>:
    id:fScreen
    name:"f_screen"
    canvas:
        Color:
            rgba: hex('#ffffff')
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [0]
    SettingsBottomToolbar:
        id:fBottombar
        sScreen:fScreen
        title: "File Transfer"
        right_action_items: [["close", lambda x: self.goBack()]]
    MDTextField:
        id:fName
        eScreen:fScreen
        hint_text: "Room Name"
        size_hint: 0.5, None
        pos_hint:{"center_x": 0.5, "center_y": 0.85}
        multiline: False
    MDTextField:
        id:fDes
        eScreen:fScreen
        hint_text: "Description"
        size_hint: 0.5, None
        multiline: False
        pos_hint:{"center_x": 0.5, "center_y": 0.65}
    MDTextField:
        id:fCom
        eScreen:fScreen
        hint_text: "Command"
        size_hint: 0.5, None
        multiline: False
        pos_hint:{"center_x": 0.5, "center_y": 0.45}    
    MDGridLayout:
        adaptive_height: True
        #md_bg_color: app.theme_cls.primary_color
        pos_hint:{"center_x": 0.5, "center_y": 0.3}
        padding:10
        spacing:10
        cols:4
        rows:1
        Widget:
        MDRaisedButton:
            id:fSave
            eScreen:fScreen
            pos_hint:{"center_x": 0.5, "center_y": 0.5}
            increment_width: "75dp"
            text:"Save"
            on_release: fScreen.saveEdits()
        MDRaisedButton:
            id:fCancel
            pos_hint:{"center_x": 0.5, "center_y": 0.5}
            increment_width: "75dp"
            text:"Cancel"
            on_release:
                app.root.transition = NoTransition( duration=0.6, direction="right")
                app.root.current = 'cl_screen'
        Widget:
    

