#:import hex kivy.utils.get_color_from_hex
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import NoTransition kivy.uix.screenmanager.NoTransition
ManagerScreen:
    MenuScreen:
    CLScreen:
    FtpScreen:
    EditScreen:
    SettingsScreen:
    ViewCodeScreen:
<ListItemWithEdit>:
    id:list_item
    icon_left:icon_left
    ListItemDelete:
        id:icon_left
        list_item:list_item
        icon: root.icon

<ConfirmDelete>:
    orientation: "vertical"
    spacing: "12dp"
    size_hint_y: None
    height: "120dp"
    canvas:
        Color:
            rgba: hex('#6d7275')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: 30,30,30,30

<MenuScreen>:
    name:"menu_screen"
    MDRaisedButton:
        id:CBbut
        pos_hint:{"center_x": 0.5, "center_y": 0.5}
        increment_width: "75dp"
        text:"CBuilder"
        on_release: app.root.current = 'cl_screen'

<CLScreen>:
    id:cScreen
    name:"cl_screen"
    cList:cList
    cScroll:cScroll
    canvas:
        Color:
            rgba: hex('#ffffff')
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [0]
    MDScrollViewRefreshLayout:
        id:cScroll
        refresh_callback: root.refresh
        root_layout: root
        pos_hint:{"top": 1}
        size_hint: None,None
        size: root.width, root.height - c_toolbar.height
        CList:
            id:cList
            cScreen:cScreen
            cScroll:cScroll
    CLBottomToolbar:
        id: c_bottombar
        cScreen:cScreen
        cList:cList
        MDToolbar:
            id:c_toolbar
            c_bottombar:c_bottombar
            title: "CBuilder"
            icon: "plus"
            type: "bottom"
            left_action_items: [["json", lambda x: c_bottombar.goViewCode()]]
            right_action_items: [["cloud-outline", lambda x: c_bottombar.goFTP()],["settings", lambda x: c_bottombar.goSettings()]]
            on_action_button: c_bottombar.addItem()
<FtpScreen>:
    id:fScreen
    #fBottombar:fBottombar
    fHost:fHost
    fUser:fUser
    fPass:fPass
    name:"f_screen"
    canvas:
        Color:
            rgba: hex('#ffffff')
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [0]
    #FtpBottomToolbar:
    #    id:fBottombar
    #    fScreen:fScreen
    #    title: "File Transfer"
    #    right_action_items: [["close", lambda x: self.goBack()]]
    MDTextField:
        id:fHost
        fScreen:fScreen
        hint_text: "Host"
        size_hint: 0.5, None
        pos_hint:{"center_x": 0.5, "center_y": 0.9}
        multiline: False
    MDTextField:
        id:fUser
        fScreen:fScreen
        hint_text: "User"
        size_hint: 0.5, None
        multiline: False
        pos_hint:{"center_x": 0.5, "center_y": 0.7}
    MDTextField:
        id:fPass
        fScreen:fScreen
        hint_text: "Command"
        size_hint: 0.5, None
        multiline: False
        pos_hint:{"center_x": 0.5, "center_y": 0.5}
    MDTextField:
        id:fPath
        fScreen:fScreen
        hint_text: "Path"
        size_hint: 0.5, None
        multiline: False
        pos_hint:{"center_x": 0.5, "center_y": 0.3}   
    GridLayout:
        #adaptive_height: True
        #md_bg_color: app.theme_cls.primary_color
        size_hint_y: None
        height: self.minimum_height
        pos_hint:{"center_x": 0.5, "center_y": 0.1}
        padding:10
        spacing:10
        cols:5
        rows:1
        Widget:
        MDIconButton:
            id:fSave
            icon: "content-save-outline"
            fScreen:fScreen
            pos_hint:{"center_x": 0.5, "center_y": 0.5}
            increment_width: "75dp"
            text:"Save"
            on_release: fScreen.saveEdits()
        MDIconButton:
            id:fSend
            fScreen:fScreen
            icon: "cloud-upload"
            pos_hint:{"center_x": 0.5, "center_y": 0.5}
            increment_width: "75dp"
            text:"Send"
        MDIconButton:
            id:fRet
            fScreen:fScreen
            icon: "cloud-download"
            pos_hint:{"center_x": 0.5, "center_y": 0.5}
            increment_width: "75dp"
            text:"Retrieve"
        Widget:
    MDIconButton:
        id:fClose
        fScreen:fScreen
        icon: "close"
        pos_hint:{"center_x": 0.93, "center_y": 0.06}
        increment_width: "75dp"
        text:"Exit"
        on_release: fScreen.goBack()
        #right_action_items: [["close", lambda x: fScreen.goBack()]]  
<EditScreen>:
    id:eScreen
    eBottombar:eBottombar
    eName:eName
    eDes:eDes
    eCom:eCom
    name:"e_screen"
    canvas:
        Color:
            rgba: hex('#ffffff')
        RoundedRectangle:
            size: self.width, self.height
            pos: self.pos
            radius: [0]
    EditBottomToolbar:
        id:eBottombar
        eScreen:eScreen
        title: "Back"
        left_action_items: [["arrow-left-circle-outline", lambda x: self.goBack()]]
    MDTextField:
        id:eName
        eScreen:eScreen
        hint_text: "Room Name"
        size_hint: 0.5, None
        pos_hint:{"center_x": 0.5, "center_y": 0.85}
        multiline: False
    MDTextField:
        id:eDes
        eScreen:eScreen
        hint_text: "Description"
        size_hint: 0.5, None
        multiline: False
        pos_hint:{"center_x": 0.5, "center_y": 0.65}
    MDTextField:
        id:eCom
        eScreen:eScreen
        hint_text: "Command"
        size_hint: 0.5, None
        multiline: False
        pos_hint:{"center_x": 0.5, "center_y": 0.45}    
    MDGridLayout:
        adaptive_height: True
        #md_bg_color: app.theme_cls.primary_color
        pos_hint:{"center_x": 0.5, "center_y": 0.3}
        padding:10
        spacing:10
        cols:4
        rows:1
        Widget:
        MDRaisedButton:
            id:eSave
            eScreen:eScreen
            pos_hint:{"center_x": 0.5, "center_y": 0.5}
            increment_width: "75dp"
            text:"Save"
            on_release: eScreen.saveEdits()
        MDRaisedButton:
            id:eCancel
            pos_hint:{"center_x": 0.5, "center_y": 0.5}
            increment_width: "75dp"
            text:"Cancel"
            on_release:
                app.root.transition = SlideTransition( duration=0.6, direction="right")
                app.root.current = 'cl_screen'
        Widget:
        
    
<SettingsScreen>:
    id:sScreen
    name:"s_screen"
    canvas:
        Color:
            rgba: hex('#737475')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [0]
    MDIconButton:
        id:sClose
        sScreen:sScreen
        icon: "close"
        pos_hint:{"center_x": 0.93, "center_y": 0.06}
        increment_width: "75dp"
        text:"Exit"
        on_release: sScreen.goBack()
<ViewCodeScreen>:
    id:vScreen
    vLabel:vLabel
    name:"v_screen"
    canvas:
        Color:
            rgba: hex('#737475')
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [0]
    ScrollView:
        pos_hint:{"top": 1}
        size_hint: None,None
        size: root.width, root.height
        Label:
            id: vLabel
            padding: [40, 40]
            size_hint: None, None   
            size: self.texture_size
            text: "JSON"
    MDIconButton:
        id:vClose
        vScreen:vScreen
        icon: "close"
        pos_hint:{"center_x": 0.93, "center_y": 0.06}
        increment_width: "75dp"
        text:"Exit"
        on_release: vScreen.goBack()


